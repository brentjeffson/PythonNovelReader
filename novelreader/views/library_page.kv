#: import NoTransition kivy.uix.screenmanager.NoTransition
<LibraryPage>:
    name: 'library_page'
    novellist: novellist
    bottom_controls: controls

    BoxLayout:
        orientation: 'vertical'
        spacing: 10
        padding: 0, 0, 0, 0

        NovelList:
            id: novellist

        BottomControlBar:
            id: controls


<NovelList>:
    viewclass: 'NovelItem'
    novellist: novel_recycle_list

    RecycleGridLayout:
        id: novel_recycle_list
        cols: 5
        padding: 12, 10, 12, 10
        spacing: 20, 92
        default_size: None, dp(56)
        default_size_hint: 1, None
        size_hint_y: None
        height: self.minimum_height

<NovelItem>:
    rows: 2
    size_hint_y: None
    height: 120
    spacing: 2

    Image:
        size_hint_y: None
        height: 120 * 0.7
        center: self.parent.center
        source: root.novel['thumbnail']
        allow_stretch: True
        keep_ratio: False

    Button:
        text: root.novel['title'][:20] #if len(root.title) <= 20 else root.title[:20]
        size_hint_y: None
        height: 120 * .3
        on_press:
            print(root.novel['title'])
        # text_size: root.width, None  # allows wrapping
        # height: self.texture_size[1]
        # size: self.texture_size

<BottomControlBar>:
    orientation: 'horizontal'
    size_hint: 1, .1
    library_btn: library_btn
    search_btn: search_btn
    downloads_btn: downloads_btn

    Button:
        id: library_btn
        text: 'Library'
        background_normal: ''
        background_color: .5, .2, .3, .5
        on_press:
            app.root.current = 'library_page'
            app.root.transition = NoTransition()

    Button:
        id: search_btn
        text: 'Search'
        on_press:
            app.root.current = 'search_page'
            app.root.transition = NoTransition()

    Button:
        id: downloads_btn
        text: 'Downloads'
        on_press:
            app.root.current = 'downloads_page'
            app.root.transition = NoTransition()